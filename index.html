<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="選擇權持倉損益計算機，視覺化持倉損益情形，並支持保證金試算功能。">
    <meta name="keywords" content="選擇權, 保證金, 保證金計算, 選擇權工具, 台指選擇權, 持倉試算">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-6002813508124164">

    <title>選擇權倉位損益計算機</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MCP2Q4RN');</script>
    <!-- End Google Tag Manager -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B9RMHT8YRQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-B9RMHT8YRQ');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6002813508124164" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MCP2Q4RN"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <h1>選擇權倉位損益計算機</h1>
    <div>
        <p>輸入當前大盤點位並利用滑鼠在左側點選拖拉建立你的倉位，即可看到你的策略在各個位置的表現。</p>
    </div>
    <div>
        <div class="trade-builder">
            <table id="optionTable">
                <thead>
                    <tr>
                        <th>call</th>
                        <th>履約價</th>
                        <th>put</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 動態生成更多行 -->
                </tbody>
            </table>
        </div>
        <div class="container">
            <div id="main_config">
                <button id="comfirmPosition">測試倉套用</button>
                <span>
                    <label for="market-price">大盤價平</label>
                    <input type="text" id="market-price" class="overall_config market-price" placeholder="大盤價平" />
                </span>
                <span>
                    <label for="analysis-width">分析寬度</label>
                    <input type="range" id="analysis-width" class="overall_config analysis-width" placeholder="分析寬度" min="1" max="10"/>
                </span>
                <span>
                    <label for="precision">精細度</label>
                    
                    <input type="range" id="precision" class="overall_config precision" placeholder="精細度" min="50" max="200"/>
                </span>
            </div>
            <div id="chart"></div>
            <table id="positions" border="1">
                <thead>
                    <tr>
                        <th>類型</th>
                        <th>持倉點位</th>
                        <th>建倉成本</th>
                        <th>持倉數量</th>
                        <th>測試單</th>
                        <th>是否計算</th>
                        <th>已平倉</th>
                        <th>平倉點數</th>
                        <th>組合</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 這裡會動態插入每一筆持倉的資料 -->
                </tbody>
                <tfoot>
                    <tr>
                        <td>
                            <button id="addPosition">新增</button>
                        </td>
                    </tr> 
                </tfoot>
            </table>
        </div>
    </div>
    <div id="opknows">
        <h1>如何計算選擇權保證金?</h1>
        <!-- 裸賣選擇權 -->
        <div class="text-block">
            <h2>裸賣選擇權</h2>
            <p>
                裸賣選擇權的保證金計算是根據期權的市場價格、期權的執行價格與標的資產的波動性來計算的。對於台指選擇權，裸賣期權的保證金額度會受到以下因素影響：
            </p>
            <ul>
                <li>價外值 ( Out-of-the-Money Value ) ： 標的資產價格與期權執行價格之間的差距。</li>
                <li>權利金市值 ( Option Premium Market Value ) ： 期權在市場上的交易價格，包括內在價值和時間價值。</li>
                <li>A值  ( A-Value ) ： 期貨交易所設定的固定參數，用於保證金計算。</li>
                <li>B值  ( B-Value ) ： 期貨交易所設定的固定參數，用於保證金計算。</li>
                <li>C值  ( C-Value ) ： 期貨交易所設定的固定參數，用於保證金計算。</li>
            </ul>
            <p>
                一般來說，裸賣選擇權的保證金計算公式為：<strong>權利金市值 + Max( A值 - 價外值，B值 )</strong>
            </p>
            <p>
                需要注意的是<br>
                履約價為價外 500點 ~ 1000點 保證金 A、B 值都會加收 20％<br>
                履約價超過價外 1000點 保證金 A、B 值都會加收 50％<br>
                具體的計算方式可能會隨著不同期權的波動性以及市場情況而調整，請以官方公告為準。
            </p>
        </div>
        <!-- 複式單 -->
        <div class="text-block">
            <h2>複式單</h2>
            <ul>
                <li>買權牛市 (Bull Call Spread) ： 買進較低履約價的買權，同時賣出較高履約價的買權，以限制風險並降低成本。</li>
                <li>買權熊市 (Bear Call Spread) ： 賣出較低履約價的買權，同時買進較高履約價的買權，用於看不漲市場。</li>
                <li>賣權牛市 (Bull Put Spread) ： 賣出較高履約價的賣權，同時買進較低履約價的賣權，適用於看不跌市場。</li>
                <li>賣權熊市 (Bear Put Spread) ： 買進較高履約價的賣權，同時賣出較低履約價的賣權，用於看跌市場並降低成本。</li>
                <li>買進跨式 (Long Straddle) ： 同時買進相同履約價與到期日的買權和賣權，預期市場將有劇烈波動。</li>
                <li>買進勒式 (Long Strangle) ： 同時買進不同履約價但相同到期日的買權和賣權，適用於市場大幅波動但成本低於跨式。</li>
                <li>賣出跨式 (Short Straddle) ： 同時賣出相同履約價與到期日的買權和賣權，適用於市場將保持穩定時賺取權利金。</li>
                <li>賣出勒式 (Short Strangle) ： 同時賣出不同履約價但相同到期日的買權和賣權，因為賣出的是價外期權，權利金收入較跨式低，但風險也相對分散。</li>
            </ul>
            <p>
                當中只有賣方價差單需要支付保證金，分別是：
            </p>
            <ul>
                <li>Bear Call Spread ： <strong>( 較高履約價 - 較低履約價 ) * 契約乘數</strong></li>
                <li>Bull Put Spread ： <strong>( 較高履約價 - 較低履約價 ) * 契約乘數</strong></li>
                <li>Short Straddle ： <strong>Max( 裸賣Call之保證金，裸賣Put之保證金 ) + 保證金較低方之權利金市值 + C值</strong></li>
                <li>Short Strangle ： <strong>Max( 裸賣Call之保證金，裸賣Put之保證金 ) + 保證金較低方之權利金市值 + C值</strong></li>
            </ul>
        </div>

        <div class="text-block">
            <h2>計算機使用之參數</h2>
            <p>
                資料為 <span id="dataGetDate"></span> 取自 <a target="_blank" href="https://www.taifex.com.tw/cht/5/indexMarging">台灣期貨交易所</a><br><br>
                警語：<br>
                1.期貨交易具有一定風險，交易人應先評估本身資金及所能擔負之風險，過去績效或未來預期的表現不可作為日後績效之保證。<br>
                2.實際可交易商品相關資訊請以主管機關公告為限。<br>
            </p>
            <ul>
                <li><strong>契約乘數：</strong> <span id="contractMultiplier"></span></li>
            </ul>
            <ul>
                <li><strong>原始保證金 - 小台指期保證金：</strong> <span id="od-miniMargin"></span></li>
                <li><strong>原始保證金 - A值：</strong> <span id="od-AValue"></span></li>
                <li><strong>原始保證金 - B值：</strong> <span id="od-BValue"></span></li>
                <li><strong>原始保證金 - C值：</strong> <span id="od-CValue"></span></li>
            </ul>
            <ul>
                <li><strong>維持保證金 - 小台指期保證金：</strong> <span id="mm-miniMargin"></span></li>
                <li><strong>維持保證金 - A值：</strong> <span id="mm-AValue"></span></li>
                <li><strong>維持保證金 - B值：</strong> <span id="mm-BValue"></span></li>
                <li><strong>維持保證金 - C值：</strong> <span id="mm-CValue"></span></li>
            </ul>
        </div>
        <div class="adsense">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6002813508124164"
                 crossorigin="anonymous"></script>
            <!-- content-rectangle-1 -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-6002813508124164"
                 data-ad-slot="3044871900"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        <div class="privacy-policy">
            我們的網站使用 Google AdSense 廣告系統，Google 可能會使用 Cookie 和網頁信標來顯示根據您興趣量身定制的廣告。<br>
            我們不會主動蒐集任何個人資料，但 Google 會根據其隱私政策處理這些資料，並為您展示有關的廣告。<br>
            我們使用 Google Analytics 分析網站的流量，幫助我們瞭解哪些頁面受歡迎，並進行網站優化。<br>
            請注意，您也可以在瀏覽器設置中禁用或清除所有 Cookie，但這可能會影響您使用我們網站的體驗。<br>
        </div>
    </div>

    <footer>
        <p>Copyright © 2024 Ray. All Rights Reserved.</p>
        <p>
            本網站上所有內容，包括文字、圖形、標誌、設計以及源代碼，均受到適用的著作權法律保護。  
            未經授權，嚴禁用於商業或非法用途的複製、分發或修改。  
        </p>
        <p>如有任何需要，請聯繫 <a href="mailto:ray8822881199@gmail.com">ray8822881199@gmail.com</a>。</p>
    </footer>

    <!-- 引用 JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <script src="script.js"></script> <!-- 本地 JavaScript 文件 -->
    
</body>
</html>
